(this["webpackJsonpmarvel-app"]=this["webpackJsonpmarvel-app"]||[]).push([[0],{97:function(e,t,c){},98:function(e,t,c){"use strict";c.r(t);var r=c(0),a=c(25),n=c.n(a),s=(c(88),c(11)),i=c(20),o=c(12),l=c(44),u=c(33),d=c(22),j=c(29),b=c(24),f=c(55),m=c(41),h=c(14),O=c.n(h),p=c(2),v=c(28),x=c(16);function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,c=e.limit,r=e.offset,a=e.results;return{total:t,limit:c,offset:r,results:a.map(C)}}function C(e){var t=e.characters,c=e.creators,r=e.dates,a=e.events,n=e.description,s=e.format,i=e.id,o=e.images,l=e.pageCount,u=e.prices,d=e.stories,j=e.thumbnail,b=e.title;return{characters:t,creators:c,events:a,dates:r,description:n,format:s,id:i,images:o,pageCount:l,prices:u,stories:d,thumbnail:y(j),title:b}}function y(e){var t=e.extension,c=e.path;return"".concat(c,".").concat(t)}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,c=e.limit,r=e.offset,a=e.results;return{total:t,limit:c,offset:r,results:a.map(S)}}function S(e){var t=e.comics,c=e.events,r=e.firstName,a=e.fullName,n=e.id,s=e.lastName,i=e.middleName,o=e.series,l=e.stories,u=e.thumbnail;return{comics:t.available,events:c.available,firstName:r,fullName:a,id:n,lastName:s,middleName:i,series:o.available,stories:l.available,thumbnail:I(u)}}function I(e){var t=e.extension,c=e.path;return"".concat(c,".").concat(t)}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,c=e.limit,r=e.offset,a=e.results;return{total:t,limit:c,offset:r,results:a.map(N)}}function N(e){var t=e.comics,c=e.description,r=e.events,a=e.id,n=e.modified,s=e.name,i=e.series,o=e.stories,l=e.thumbnail;return{comics:t.available,description:c,events:r.available,id:a,modified:n,name:s,series:i.available,stories:o.available,thumbnail:U(l)}}function U(e){var t=e.extension,c=e.path;return"".concat(c,".").concat(t)}var L="https://gateway.marvel.com:443/v1/public",B={apikey:"b2fe4031b105b678f7c22d8fa85386cf",hash:"e278b988a47a269ac9612d85dda78246",ts:"1"},R=function(){var e=Object(v.a)(O.a.mark((function e(){var t,c,r,a,n,s,i=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},c=new URL("".concat(L,"/comics")),r=Object(p.a)(Object(p.a)({},B),M(t)),c.search=new URLSearchParams(r).toString(),e.next=6,fetch(c);case 6:return a=e.sent,e.next=9,a.json();case 9:return n=e.sent,s=n.data,e.abrupt("return",g(s));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(O.a.mark((function e(t){var c,r,a,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new URL("".concat(L,"/comics/").concat(t)),r=Object(p.a)({},B),c.search=new URLSearchParams(r).toString(),e.next=5,fetch(c);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,s=n.data,e.abrupt("return",C(s.results[0]));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(v.a)(O.a.mark((function e(t){var c,r,a,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new URL("".concat(L,"/comics/").concat(t,"/creators")),r=Object(p.a)({},B),c.search=new URLSearchParams(r).toString(),e.next=5,fetch(c);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,s=n.data,e.abrupt("return",w(s));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(v.a)(O.a.mark((function e(t){var c,r,a,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new URL("".concat(L,"/comics/").concat(t,"/characters")),r=Object(p.a)({},B),c.search=new URLSearchParams(r).toString(),e.next=5,fetch(c);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,s=n.data,e.abrupt("return",k(s));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function M(e){var t={};for(var c in e)null!==e[c]&&void 0!==e[c]&&(t[c]=e[c]);return t}var T=Object(x.c)(),W=T.getInitialState({status:"idle",error:null,activeComic:null,creatorsByComic:[],filters:{limit:20,offset:0,total:0,currentPage:0,titleStartsWith:null}}),z=Object(x.b)("comics/fetchComics",function(){var e=Object(v.a)(O.a.mark((function e(t,c){var r,a,n,s,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.dispatch,e.next=3,R(Object(p.a)({},t));case 3:return a=e.sent,n=a.limit,s=a.offset,i=a.total,o=a.results,r(J({offset:s,limit:n,total:i,titleStartsWith:(null===t||void 0===t?void 0:t.titleStartsWith)||null})),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),F=Object(x.b)("comics/fetchComicById",function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=Object(x.d)({name:"comics",initialState:W,reducers:{filtersUpdated:function(e,t){e.filters=Object(p.a)(Object(p.a)({},e.filters),t.payload)}},extraReducers:function(e){e.addCase(z.pending,(function(e,t){e.status="loading"})).addCase(z.fulfilled,(function(e,t){e.status="succeeded",T.removeAll(e),T.upsertMany(e,t.payload)})).addCase(z.rejected,(function(e,t){e.status="failed",e.error=new Error("Error fetching data")})).addCase(F.fulfilled,(function(e,t){e.activeComic=t.payload}))}}),D=H.reducer,J=H.actions.filtersUpdated,G=T.getSelectors((function(e){return e.comics})),q=(G.selectAll,G.selectById),K=G.selectIds,Q=c(7),V=c(48),X=c(32),Y=c(66),Z=Object(x.c)(),$=Z.getInitialState({status:"idle",error:null,filters:{limit:20,offset:0,total:0}}),_=Object(x.b)("comics/fetchCharactersByComic",function(){var e=Object(v.a)(O.a.mark((function e(t,c){var r,a,n,s,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.dispatch,e.next=3,A(t);case 3:return a=e.sent,n=a.limit,s=a.offset,i=a.total,o=a.results,r(ce({limit:n,offset:s,total:i})),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),ee=Object(x.d)({name:"comicCharacters",initialState:$,reducers:{filtersUpdated:function(e,t){e.filters=Object(p.a)(Object(p.a)({},e.filters),t.payload)}},extraReducers:function(e){e.addCase(_.pending,(function(e,t){e.status="loading"})).addCase(_.fulfilled,(function(e,t){e.status="succeeded",Z.removeAll(e),Z.upsertMany(e,t.payload)})).addCase(_.rejected,(function(e,t){e.status="failed",e.error=new Error("Error fetching data")}))}}),te=ee.reducer,ce=ee.actions.filtersUpdated,re=Z.getSelectors((function(e){return e.comicCharacters})),ae=(re.selectAll,re.selectById),ne=(re.selectIds,c(1)),se=function(e){var t=e.character,c=Object(r.useState)(!1),a=Object(Q.a)(c,2),n=a[0],i=a[1],o=t.resourceURI.split("/").reverse(),l=Object(Q.a)(o,1)[0],j=Object(s.c)((function(e){return ae(e,l)}));return Object(ne.jsxs)(V.a.Item,{className:"d-flex justify-content-between",children:[Object(ne.jsx)("p",{children:Object(ne.jsx)("strong",{children:t.name})}),Object(ne.jsx)(m.a,{variant:"outline-primary",size:"sm",onClick:function(){return i(!0)},children:"Show more"}),Object(ne.jsxs)(X.a,{size:"lg",show:n,onHide:function(){return i(!1)},children:[Object(ne.jsx)(X.a.Header,{closeButton:!0,children:Object(ne.jsx)(X.a.Title,{children:"Character details"})}),Object(ne.jsx)(X.a.Body,{children:Object(ne.jsxs)(u.a,{children:[Object(ne.jsx)(d.a,{md:6,children:Object(ne.jsx)(Y.a,{src:null===j||void 0===j?void 0:j.thumbnail,rounded:!0,thumbnail:!0})}),Object(ne.jsxs)(d.a,{md:6,children:[Object(ne.jsx)("h4",{children:null===j||void 0===j?void 0:j.name}),Object(ne.jsxs)("p",{children:["Comics: ",null===j||void 0===j?void 0:j.comics]}),Object(ne.jsxs)("p",{children:["Events: ",null===j||void 0===j?void 0:j.events]}),Object(ne.jsxs)("p",{children:["Series: ",null===j||void 0===j?void 0:j.series]}),Object(ne.jsxs)("p",{children:["Stories: ",null===j||void 0===j?void 0:j.stories]}),Object(ne.jsx)("p",{children:null===j||void 0===j?void 0:j.description})]})]})})]})]})},ie=function(){var e,t=Object(s.b)(),c=Object(o.h)().comicId,a=Object(s.c)((function(e){return e.comics})).activeComic;(Object(r.useEffect)((function(){t(_(c))}),[t,c]),a)&&(e=a.characters.items.map((function(e){return Object(ne.jsx)(se,{character:e},e.resourceURI.split("/").reverse()[0])})));return Object(ne.jsx)(V.a,{children:e})},oe=Object(x.c)(),le=oe.getInitialState({status:"idle",error:null,filters:{limit:20,offset:0,total:0}}),ue=Object(x.b)("comics/fetchCreatorsByComic",function(){var e=Object(v.a)(O.a.mark((function e(t,c){var r,a,n,s,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.dispatch,e.next=3,P(t);case 3:return a=e.sent,n=a.limit,s=a.offset,i=a.total,o=a.results,r(be({limit:n,offset:s,total:i})),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),de=Object(x.d)({name:"comicCreators",initialState:le,reducers:{filtersUpdated:function(e,t){e.filters=Object(p.a)(Object(p.a)({},e.filters),t.payload)}},extraReducers:function(e){e.addCase(ue.pending,(function(e,t){e.status="loading"})).addCase(ue.fulfilled,(function(e,t){e.status="succeeded",oe.removeAll(e),oe.upsertMany(e,t.payload)})).addCase(ue.rejected,(function(e,t){e.status="failed",e.error=new Error("Error fetching data")}))}}),je=de.reducer,be=de.actions.filtersUpdated,fe=oe.getSelectors((function(e){return e.comicCreators})),me=(fe.selectAll,fe.selectById),he=(fe.selectIds,function(e){var t=e.creator,c=Object(r.useState)(!1),a=Object(Q.a)(c,2),n=a[0],i=a[1],o=t.resourceURI.split("/").reverse(),l=Object(Q.a)(o,1)[0],j=Object(s.c)((function(e){return me(e,l)}));return Object(ne.jsxs)(V.a.Item,{className:"d-flex justify-content-between",children:[Object(ne.jsxs)("p",{children:[Object(ne.jsx)("strong",{children:t.name})," ",t.role]}),Object(ne.jsx)(m.a,{variant:"outline-primary",size:"sm",onClick:function(){return i(!0)},children:"Show more"}),Object(ne.jsxs)(X.a,{size:"lg",show:n,onHide:function(){return i(!1)},children:[Object(ne.jsx)(X.a.Header,{closeButton:!0,children:Object(ne.jsx)(X.a.Title,{children:"Creator details"})}),Object(ne.jsx)(X.a.Body,{children:Object(ne.jsxs)(u.a,{children:[Object(ne.jsx)(d.a,{md:6,children:Object(ne.jsx)(Y.a,{src:null===j||void 0===j?void 0:j.thumbnail,rounded:!0,thumbnail:!0})}),Object(ne.jsxs)(d.a,{md:6,children:[Object(ne.jsx)("h4",{children:null===j||void 0===j?void 0:j.fullName}),Object(ne.jsxs)("p",{children:["Comics: ",null===j||void 0===j?void 0:j.comics]}),Object(ne.jsxs)("p",{children:["Events: ",null===j||void 0===j?void 0:j.events]}),Object(ne.jsxs)("p",{children:["Series: ",null===j||void 0===j?void 0:j.series]}),Object(ne.jsxs)("p",{children:["Stories: ",null===j||void 0===j?void 0:j.stories]})]})]})})]})]})}),Oe=function(){var e,t=Object(s.b)(),c=Object(o.h)().comicId,a=Object(s.c)((function(e){return e.comics})).activeComic;(Object(r.useEffect)((function(){t(ue(c))}),[t,c]),a)&&(e=a.creators.items.map((function(e){return Object(ne.jsx)(he,{creator:e},e.resourceURI.split("/").reverse()[0])})));return Object(ne.jsx)(V.a,{className:"mt-4",children:e})},pe=function(){var e,t=Object(s.b)(),c=Object(o.g)(),a=Object(o.h)().comicId,n=Object(o.i)(),h=n.path,O=n.url,p=Object(s.c)((function(e){return e.comics.activeComic}));Object(r.useEffect)((function(){t(F(a))}),[t,a]);return p&&(e=Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsxs)(j.a,{children:[Object(ne.jsx)(j.a.Img,{variant:"top",src:p.thumbnail}),Object(ne.jsxs)(j.a.Body,{children:[Object(ne.jsx)(j.a.Title,{children:p.title}),Object(ne.jsx)(j.a.Text,{children:p.description})]})]})})),Object(ne.jsx)(l.a,{fluid:"lg",className:"mt-4",children:Object(ne.jsxs)(u.a,{children:[Object(ne.jsxs)(d.a,{md:3,children:[e,Object(ne.jsx)(m.a,{variant:"danger",className:"mt-3 w-100",onClick:function(){c.push("/comics")},children:"Back"})]}),Object(ne.jsxs)(d.a,{md:9,children:[Object(ne.jsxs)(b.a,{variant:"tabs",children:[Object(ne.jsx)(b.a.Item,{children:Object(ne.jsxs)(b.a.Link,{as:i.b,to:"".concat(O,"/characters"),children:["Characters ",Object(ne.jsx)(f.a,{pill:!0,bg:"primary",children:null===p||void 0===p?void 0:p.characters.available})]})}),Object(ne.jsx)(b.a.Item,{children:Object(ne.jsxs)(b.a.Link,{as:i.b,to:"".concat(O,"/creators"),children:["Creators ",Object(ne.jsx)(f.a,{pill:!0,bg:"primary",children:null===p||void 0===p?void 0:p.creators.available})]})}),Object(ne.jsx)(b.a.Item,{children:Object(ne.jsxs)(b.a.Link,{as:i.b,to:"".concat(O,"/events"),children:["Events ",Object(ne.jsx)(f.a,{pill:!0,bg:"primary",children:null===p||void 0===p?void 0:p.events.available})]})}),Object(ne.jsx)(b.a.Item,{children:Object(ne.jsxs)(b.a.Link,{as:i.b,to:"".concat(O,"/stories"),children:["Stories ",Object(ne.jsx)(f.a,{pill:!0,bg:"primary",children:null===p||void 0===p?void 0:p.stories.available})]})})]}),Object(ne.jsxs)(o.d,{children:[Object(ne.jsx)(o.b,{exact:!0,path:"".concat(h,"/characters"),component:ie}),Object(ne.jsx)(o.b,{exact:!0,path:"".concat(h,"/creators"),component:Oe}),Object(ne.jsx)(o.a,{to:"".concat(O,"/characters")})]})]})]})})},ve=c(78),xe=c(82),ge=c.n(xe),Ce=c(83),ye=function(){return Object(ne.jsx)(Ce.a,{animation:"border",role:"status",className:"mx-auto",children:Object(ne.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},we=function(e){var t=e.comicId,c=Object(o.g)(),r=Object(s.c)((function(e){return q(e,t)}));return Object(ne.jsx)(d.a,{onClick:function(){c.push("/comics/".concat(r.id))},children:Object(ne.jsxs)(j.a,{className:"custom-card",children:[Object(ne.jsx)(j.a.Img,{variant:"top",src:r.thumbnail}),Object(ne.jsxs)(j.a.Body,{children:[Object(ne.jsx)(j.a.Title,{children:r.title}),Object(ne.jsx)(j.a.Text,{children:r.description})]})]})})},Se=function(){var e=Object(s.b)(),t=Object(r.useState)(""),c=Object(Q.a)(t,2),a=c[0],n=c[1];return Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsx)("form",{onSubmit:function(t){t.preventDefault();var c=a.length>=1?a:null;e(z({limit:20,offset:0,titleStartsWith:c})),e(J({currentPage:0}))},children:Object(ne.jsx)(ve.a.Group,{className:"mb-5",children:Object(ne.jsx)(ve.a.Control,{type:"text",placeholder:"Search comics",value:a,onChange:function(e){n(e.target.value)},autoComplete:"off",autoFocus:!0})})})})},Ie=function(e){e.comicStatus;var t=Object(s.b)(),c=Object(s.c)((function(e){return e.comics})).filters,r=c.limit,a=c.total,n=c.titleStartsWith,i=c.currentPage;return Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsx)(u.a,{className:"d-flex justify-content-between my-4",children:Object(ne.jsx)(ge.a,{pageCount:Math.ceil(a/r),marginPagesDisplayed:3,pageRangeDisplayed:5,previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",containerClassName:"pagination",activeClassName:"active",onPageChange:function(e){var c=e.selected,a=Math.ceil(c*r);t(z({offset:a,titleStartsWith:n})),t(J({currentPage:c}))},forcePage:i})})})},ke=function(){var e,t=Object(s.b)(),c=Object(s.c)(K),a=Object(s.c)((function(e){return e.comics.status})),n=Object(s.c)((function(e){return e.comics.error}));return Object(r.useEffect)((function(){"idle"===a&&t(z())}),[a,t]),"loading"===a?e=Object(ne.jsx)(ye,{}):"succeeded"===a?e=c.map((function(e){return Object(ne.jsx)(we,{comicId:e},e)})):"failed"===a&&(e=Object(ne.jsx)("div",{children:n})),Object(ne.jsxs)(l.a,{fluid:"lg",children:[Object(ne.jsx)("h1",{className:"my-4",children:"Comics"}),Object(ne.jsx)(Se,{}),Object(ne.jsx)(u.a,{xs:1,md:3,lg:4,className:"g-4",children:e}),Object(ne.jsx)(Ie,{comicStatus:a})]})},Ne=c(79),Ue=function(){return Object(ne.jsx)(Ne.a,{bg:"dark",variant:"dark",children:Object(ne.jsxs)(l.a,{fluid:!0,children:[Object(ne.jsx)(Ne.a.Brand,{as:i.b,to:"/comics",children:"Marvel App"}),Object(ne.jsx)(b.a,{className:"me-auto",children:Object(ne.jsx)(b.a.Link,{as:i.b,to:"/comics",children:"Comics"})})]})})},Le=function(){return Object(ne.jsx)(i.a,{children:Object(ne.jsxs)("div",{children:[Object(ne.jsx)(Ue,{}),Object(ne.jsxs)(o.d,{children:[Object(ne.jsx)(o.b,{exact:!0,path:"/comics",component:ke}),Object(ne.jsx)(o.b,{exac:!0,path:"/comics/:comicId",component:pe}),Object(ne.jsx)(o.a,{to:"/comics"})]})]})})},Be=Object(x.a)({reducer:{comics:D,comicCharacters:te,comicCreators:je}});var Re=function(){return Object(ne.jsx)(s.a,{store:Be,children:Object(ne.jsx)(Le,{})})};c(97);n.a.render(Object(ne.jsx)(Re,{}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.231a0216.chunk.js.map